\section{Protocolo In-Band}
\label{sec:ana_inband}

En esta secci칩n, se tomar치 la decisi칩n de seleccionar el protocolo de control in-band que se utilizar치 en el proyecto. Despu칠s de una cuidadosa evaluaci칩n de las opciones disponibles, se ha decidido utilizar el protocolo IoTorii \cite{rojas2021outperforming}, basado en el enfoque de enrutamiento jer치rquico, como la soluci칩n m치s adecuada. Esta elecci칩n se respalda por el hecho de que el autor del proyecto ha participado activamente en el desarrollo del protocolo IoTorii, lo que garantiza un conocimiento profundo y una experiencia pr치ctica en su implementaci칩n.\\
\\
El protocolo IoTorii ofrece una serie de ventajas significativas para el control in-band en entornos de \gls{iot}. Su enfoque jer치rquico de etiquetado permite una gesti칩n eficiente y escalable de la red, al tiempo que proporciona una mayor flexibilidad y adaptabilidad a las necesidades espec칤ficas del proyecto. Adem치s, IoTorii ha sido probado y validado en diversas situaciones y escenarios, demostrando su eficacia y confiabilidad en la pr치ctica.\\
\\
En este contexto, se ha tomado la decisi칩n de hacer uso de los caminos generados por el protocolo IoTorii, donde cada nodo de la red posee rutas distintas para alcanzar el nodo ra칤z de la topolog칤a. En el caso de este proyecto, el nodo ra칤z se designar치 como el controlador (o el nodo que brinda acceso al controlador). Por lo tanto, la innovaci칩n radica en la implementaci칩n de IoTorii en un entorno de redes definidas por software (SDN).La integraci칩n de IoTorii con el entorno SDN permitir치 aprovechar las capacidades y ventajas de ambos enfoques. La combinaci칩n de la eficiencia y escalabilidad jer치rquica de IoTorii con la flexibilidad y el control centralizado de SDN ofrece un enfoque prometedor para el desarrollo y la gesti칩n de redes \gls{iot}. Este enfoque innovador proporcionar치 una base s칩lida para llevar a cabo el proyecto y permitir치 explorar nuevas posibilidades y mejoras en el 치mbito del control in-band para entornos de \gls{iot}.

\subsection{Protocolo IoTorii}

El protocolo IoTorii fue dise침ado para trabajar en redes de baja capacidad en entornos \gls{iot}, tratando de solventar carencias de otros protocolos del mismo 치mbito como \gls{rpl}, bas치ndose en dos principios: (1) Intercambiar menos mensajes y reducir el tama침o de las tablas de rutas, y (2) Ofrecer resiliencia a trav칠s de caminos de \textit{back-up}, con una exploraci칩n inicial relativamente r치pida. Dichos principios b치sicos tratan de impactar sobre el consumo y la robustez de las redes de baja capacidad, factores clave en este tipo de redes.


\subsubsection{Operativa del protocolo IoTorii}

El objetivo de IoTorii es dar cada nodo de la red por lo menos una etiqueta jer치rquica, en adelante \gls{hlm}, para establecer una jerarqu칤a en la topolog칤a. Otra forma de verlo puede ser ver la jerarqu칤a como un 치rbol que se va ramificando, y est치 enraizado en el nodo que act칰a como \textit{root}. Las \gls{hlm} tratan de proveer de m치s significado a las MACs convencionales. IoTorii est치 basado en el protocolo GA3 \cite{rojas2017ga3}, el cual trataba de buscar el mismo etiquetado jer치rquico pero en redes cableadas de Data Centers. El principio de estas etiquetas est치 basado en una revisi칩n del estandar \texttt{ieee802} que se hizo para dar cabida al uso de direcciones MAC mejoradas para el reenv칤o de paquetes en red.\\
\\
El proceso de la difusi칩n de dichas etiquetas se pueden ver en la figura \ref{fig:iotorii-operation}. El primer paso es establecer en la topolog칤a quien va a actuar como nodo \textit{root}, este caso seg칰n se puede apreciar es el nodo \texttt{A}. Este nodo ser치 el encargado de iniciar todo el proceso de asignaci칩n de etiquetas en la topolog칤a. La asignaci칩n de etiquetas empezar치 desde el \textit{root} haciendo uso de un mensaje de tipo \textit{SetHLMAC}, el cual consiste en mandar la \gls{hlm} del remitente m치s un sufijo que se asociar치 al vecino. Pero, 쮸 qu칠 consideramos vecino? La condici칩n de vecino se da cuando dos nodos se encuentran en rango de cobertura, y se han notificado entre ellos de su presencia mediante un mensaje de tipo \textit{Hello}. Dicho mensaje es una trama vac칤a donde solo anuncian su direcci칩n MAC real. \\
\\
Un s칤mil en la vida real podr칤a verse como cuando una nueva familia llega al vecindario y va casa por casa present치ndose, ``춰Hola somos nuevos aqu칤 {\DejaSans 游땎}! Acabamos de llegar al vecindario, nos hemos mudado a la casa de enfrente". Sin embargo, no te sueles presentar con todas las personas del vecindario, solo con los vecinos m치s cercanos, pporqueno te interesa que todos sepan de ti, solo aquellos con los que vayas a tener relaci칩n por cercan칤a.\\
\\
\begin{figure}[ht!]
    \centering
    \includegraphics[width=\textwidth]{archivos/img/analisis/iotorii-operation.pdf}
    \caption{Operativa del protocolo de IoTorii \cite{rojas2021outperforming}}
    \label{fig:iotorii-operation}
\end{figure}



\input{archivos/diagramas/iotorii_alg}

\begin{sidewaysfigure}
    \centering
    \includegraphics[width=\textwidth]{archivos/img/analisis/Comparation_frame_iotorii.eps}
    \caption{Mensajes de control en IoTorii \cite{rojas2021outperforming}}
    \label{fig:frameformat-setHLMAC}
\end{sidewaysfigure}


\subsubsection{Configuraci칩n del protocolo IoTorii}